(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{105:function(e,n){},111:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(50),l=t.n(i),o=(t(73),t(2)),c=t(3),u=t(51),s=t.n(u),p=t(52),d=t.n(p),m=t(53),f=t.n(m);function h(){var e=Object(o.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 2em;\n    box-sizing: border-box;\n    background-color: #351064;\n\n    a {\n      text-decoration: none;\n    }\n\n    h1 {\n      color: #e9d8ff;\n    }\n\n    > div > div {\n      display: flex;\n\n      > a {\n        margin-left: 16px;\n      }\n    }\n\n    a {\n      display: flex;\n      align-items: center;\n      color: #e9d8ff;\n\n      svg {\n        margin-left: 0.5em;\n      }\n    }\n  "]);return h=function(){return e},e}var b={Navigation:c.a.div(h())},g=function(){var e=!!localStorage.getItem("token");return r.a.createElement(b.Navigation,null,r.a.createElement("a",{href:"/"},r.a.createElement("h1",null,"Via")),r.a.createElement("div",null,!e&&r.a.createElement("a",{href:"/login"},"Sign In ",r.a.createElement(s.a,null)),e&&r.a.createElement("div",null,r.a.createElement("a",{href:"/",onClick:function(){localStorage.removeItem("token")}},"Sign Out ",r.a.createElement(f.a,null)),r.a.createElement("a",{href:"/manage"},"My Links ",r.a.createElement(d.a,null)))))},v=t(1),x=t.n(v),E=t(4),w=t(6),k=t(57),y=t(5),j="#49227B",O="#a474e0",S="#C99FFF",I="https://env-7018596.jelastic.metropolia.fi",C=function(){var e=Object(E.a)(x.a.mark((function e(n){var t,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},body:JSON.stringify(n)},e.prev=1,e.next=4,window.fetch(I+"/graphql",t);case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r.data);case 11:return e.prev=11,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}(),U=t(58),$=t.n(U),z=t(59),T=t.n(z),q=t(60),L=t.n(q),P=t(61),A=t.n(P),R=t(62),F=t.n(R),M=t(63),N=t.n(M);function B(){var e=Object(o.a)(["\n    position: relative;\n    display: block;\n    height: 32px;\n    padding-left: 44px;\n    line-height: 32px;\n    user-select: none;\n    cursor: pointer;\n\n    input {\n      position: absolute;\n      opacity: 0;\n      cursor: pointer;\n      height: 0;\n      width: 0;\n    }\n\n    svg {\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: 32px;\n      width: 32px;\n      fill: ",";\n    }\n  "]);return B=function(){return e},e}var D={Checkbox:c.a.label(B(),(function(e){return e.checked?"#fff":O}))},J=function(e){var n=e.label,t=e.checked,a=e.onChange;return r.a.createElement(D.Checkbox,{checked:t},n,r.a.createElement("input",{type:"checkbox",checked:t,onChange:a}),t?r.a.createElement(N.a,null):r.a.createElement(F.a,null))},H=t(64),V=t.n(H);function W(){var e=Object(o.a)(["\n    position: relative;\n    display: inline-block;\n    margin: 0 4px;\n    padding-right: 24px;\n    z-index: 1;\n    color: #f5edff;\n\n    &:before {\n      content: '';\n      display: block;\n      position: absolute;\n      bottom: -1px;\n      left: -2px;\n      width: calc(100% + 4px);\n      height: 8px;\n      background-color: #6835a8;\n      z-index: -1;\n    }\n\n    svg {\n      position: absolute;\n      margin: -2px 0 0 0;\n    }\n\n    select {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      left: 0;\n      top: 0;\n      opacity: 0;\n      cursor: pointer;\n    }\n  "]);return W=function(){return e},e}var Y={Dropdown:c.a.div(W())},G=function(e){var n=e.id,t=e.selected,a=e.options,i=e.onChange;a[t];return r.a.createElement(Y.Dropdown,null,r.a.createElement("b",null,a[t].title),r.a.createElement(V.a,null),r.a.createElement("select",{id:n,onChange:i},a.map((function(e,n){return r.a.createElement("option",{value:n,selected:t===n},e.title)}))))};function K(){var e=Object(o.a)(["\n    font-size: 1.2em;\n  "]);return K=function(){return e},e}function Q(){var e=Object(o.a)(["\n    display: flex;\n    margin: 32px 0;\n\n    button {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 70px;\n      width: 120px;\n      background-image: none;\n      border: none;\n      outline: none;\n      border-radius: 0 6px 6px 0;\n      background-color: ",";\n\n      svg {\n        width: 32px;\n        height: 32px;\n        fill: #49227b;\n      }\n    }\n  "]);return Q=function(){return e},e}function X(){var e=Object(o.a)(["\n    display: flex;\n    padding: 200px;\n    width: 100%;\n    background-color: ",";\n    box-sizing: border-box;\n    color: ",";\n\n    .side {\n      flex: 1;\n\n      &.text {\n        flex: initial;\n        width: 550px;\n\n        p {\n          font-size: 1.5em;\n        }\n      }\n    }\n\n    h1 {\n      font-size: 4em;\n      color: #e9d8ff;\n    }\n\n    h3 {\n      position: relative;\n      margin-left: 32px;\n      padding-left: 28px;\n\n      svg {\n        position: absolute;\n        left: 0;\n      }\n    }\n\n    form {\n      input {\n        padding: 16px;\n        width: 100%;\n        font-size: 2em;\n        border-radius: 6px 0 0 6px;\n        background-color: ",";\n        border: none;\n        outline: none;\n\n        &::placeholder {\n          color: #814cc6;\n          opacity: 1;\n        }\n      }\n    }\n  "]);return X=function(){return e},e}var Z={Hero:c.a.div(X(),j,S,(function(e){return e.done?"#fff":"#c99fff"})),Input:c.a.div(Q(),(function(e){return e.done?"#fff":"#a474e0"})),Text:c.a.p(K())},_=[{title:"as short as possible",description:"The link will be short and sweet. This is the best option when sharing something publicly, like on Twitter."},{title:"impossible to quess",description:"The link will be long and extremely hard to guess. Pick this option when privacy is a concern."}],ee=[{title:"I want to see",description:"You will have access to an admin page where detailed usage statistics can be viewed."},{title:"I dont want to see",description:"The amount of clicks will be visible, but no detailed statistics will be recorded."},{title:"I dont want anyone to see",description:"Nothing will be recorded from this link. This option requires the link to have a deadline."}],ne=function(){var e=!!localStorage.getItem("token"),n=Object(a.useState)(!1),t=Object(y.a)(n,2),i=t[0],l=t[1],o=Object(a.useState)(e),c=Object(y.a)(o,2),u=c[0],s=c[1],p=Object(a.useState)(""),d=Object(y.a)(p,2),m=d[0],f=d[1],h=Object(a.useState)({linkType:0,linkAnalytics:0}),b=Object(y.a)(h,2),g=b[0],v=b[1],j=Object(a.useRef)(null),O=Object(a.useState)("..."),S=Object(y.a)(O,2),U=S[0],z=S[1],q=Object(a.useState)("..."),P=Object(y.a)(q,2),R=P[0],F=P[1];Object(a.useEffect)((function(){var e=A()(I);return e.on("minifiedIndex",(function(e){z(""+e)})),e.on("visitedIndex",(function(e){F(""+e)})),C({query:"\n        {\n          stats {\n            minifiedIndex,\n            visitedIndex\n          }\n        }\n      "}).then((function(e){e&&e.stats&&(z(""+e.stats.minifiedIndex),F(""+e.stats.visitedIndex))})),function(){e.disconnect()}}),[]);var M=function(e){return function(n){v(Object(k.a)({},g,Object(w.a)({},e,n.target.value)))}},N=function(){var e=Object(E.a)(x.a.mark((function e(n){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!i){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,C({query:"\n        mutation Shorten($url: String!, $isObscured: Boolean!, $isMine: Boolean!) {\n          shortenUrl(url: $url, isObscured: $isObscured, isMine: $isMine) {\n            hash\n          }\n        }\n      ",variables:{url:m,isObscured:1==g.linkType,isMine:u}});case 5:(t=e.sent)&&t.shortenUrl&&t.shortenUrl.hash?(f("".concat("https://env-7018596.jelastic.metropolia.fi/").concat(t.shortenUrl.hash)),l(!0)):f("");case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return r.a.createElement(Z.Hero,{done:i},r.a.createElement("div",{className:"side text"},r.a.createElement("h1",null,"Share with",r.a.createElement("br",null),"confidence"),r.a.createElement("p",null,"Shorten your links with ",r.a.createElement("b",null,"Via"),r.a.createElement("br",null),"and gain back control"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,U)," links shortened"),r.a.createElement("li",null,r.a.createElement("b",null,R)," links clicked"))),r.a.createElement("div",{className:"side"},r.a.createElement("form",{onSubmit:N},r.a.createElement("h3",null,r.a.createElement(L.a,null),"Just paste any link here and see the magic happen"),r.a.createElement(Z.Input,{done:i},r.a.createElement("input",{type:"text",placeholder:"https://",value:m,onChange:function(e){i||f(e.target.value)},onClick:function(e){var n;i&&(null===(n=j.current)||void 0===n||n.select())},ref:j}),i?r.a.createElement("button",null,r.a.createElement(T.a,null)):r.a.createElement("button",{type:"submit"},r.a.createElement($.a,null))),r.a.createElement(Z.Text,null,"I want my link to be"," ",r.a.createElement(G,{id:"linkType",selected:g.linkType,options:_,onChange:M("linkType")}),r.a.createElement("br",null),"and"," ",r.a.createElement(G,{id:"linkAnalytics",selected:g.linkAnalytics,options:ee,onChange:M("linkAnalytics")})," ","how it is used."),e&&r.a.createElement(J,{label:"Link this URL to my account",checked:u,onChange:function(e){s(e.target.checked)}}))))},te=t(22);function ae(){var e=Object(o.a)(["\n    margin-bottom: 1em;\n\n    label {\n      display: block;\n      margin-bottom: 4px;\n      font-size: 0.8em;\n    }\n\n    input {\n      padding: 8px;\n      width: 100%;\n      box-sizing: border-box;\n    }\n  "]);return ae=function(){return e},e}function re(){var e=Object(o.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 2em;\n    width: 300px;\n    border-radius: 6px;\n    background-color: #fff;\n\n    h2 {\n      margin: 0 0 1em 0;\n      text-align: center;\n    }\n\n    p {\n      margin: 2em 0 0 0;\n      text-align: center;\n      font-size: 0.8em;\n    }\n  "]);return re=function(){return e},e}function ie(){var e=Object(o.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100vw;\n    height: 100vh;\n    background-color: ",";\n  "]);return ie=function(){return e},e}var le={Page:c.a.div(ie(),j),Form:c.a.form(re()),Input:c.a.div(ae())},oe=function(){var e=Object(te.a)(),n=e.register,t=e.handleSubmit,a=(e.errors,function(){var e=Object(E.a)(x.a.mark((function e(n){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({query:"\n        mutation Login($email: String!, $password: String!) {\n          loginUser(email: $email, password: $password) {\n            token\n          }\n        }\n      ",variables:{email:n.email,password:n.password}});case 2:(t=e.sent)&&t.loginUser&&t.loginUser.token&&(localStorage.setItem("token",t.loginUser.token),window.location.href="/");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());return r.a.createElement(le.Page,null,r.a.createElement(le.Form,{onSubmit:t(a)},r.a.createElement("h2",null,"Sign In"),r.a.createElement(le.Input,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{ref:n({required:!0}),name:"email",type:"email"})),r.a.createElement(le.Input,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{ref:n({required:!0}),name:"password",type:"password"})),r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement("p",null,"No account yet? ",r.a.createElement("a",{href:"/register"},"Create a new account."))))};function ce(){var e=Object(o.a)(["\n    margin-bottom: 1em;\n\n    label {\n      display: block;\n      margin-bottom: 4px;\n      font-size: 0.8em;\n    }\n\n    input {\n      padding: 8px;\n      width: 100%;\n      box-sizing: border-box;\n    }\n  "]);return ce=function(){return e},e}function ue(){var e=Object(o.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 2em;\n    width: 300px;\n    border-radius: 6px;\n    background-color: #fff;\n\n    h2 {\n      margin: 0 0 1em 0;\n      text-align: center;\n    }\n\n    p {\n      margin: 2em 0 0 0;\n      text-align: center;\n      font-size: 0.8em;\n    }\n  "]);return ue=function(){return e},e}function se(){var e=Object(o.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100vw;\n    height: 100vh;\n    background-color: ",";\n  "]);return se=function(){return e},e}var pe={Page:c.a.div(se(),j),Form:c.a.form(ue()),Input:c.a.div(ce())},de=function(){var e=Object(te.a)(),n=e.register,t=e.handleSubmit,a=(e.errors,function(){var e=Object(E.a)(x.a.mark((function e(n){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.password==n.repassword){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,C({query:"\n        mutation Register($email: String!, $password: String!) {\n          registerUser(email: $email, password: $password) {\n            token\n          }\n        }\n      ",variables:{email:n.email,password:n.password}});case 4:(t=e.sent)&&t.registerUser&&t.registerUser.token&&(localStorage.setItem("token",t.registerUser.token),window.location.href="/");case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());return r.a.createElement(pe.Page,null,r.a.createElement(pe.Form,{onSubmit:t(a)},r.a.createElement("h2",null,"Register"),r.a.createElement(pe.Input,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{ref:n({required:!0}),name:"email",type:"email"})),r.a.createElement(pe.Input,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{ref:n({required:!0}),name:"password",type:"password"})),r.a.createElement(pe.Input,null,r.a.createElement("label",null,"Re-Password"),r.a.createElement("input",{ref:n({required:!0}),name:"repassword",type:"password"})),r.a.createElement("button",{type:"submit"},"Register"),r.a.createElement("p",null,"Already have an account? ",r.a.createElement("a",{href:"/login"},"Login."))))},me=t(113),fe=t(31),he=t.n(fe);function be(){var e=Object(o.a)(["\n    flex: 1;\n    padding-left: 32px;\n\n    h1 {\n      color: #e9d8ff;\n    }\n\n    a {\n      display: flex;\n      align-items: center;\n      color: ",";\n\n      svg {\n        padding-right: 8px;\n      }\n    }\n\n    button {\n      padding: 8px;\n    }\n  "]);return be=function(){return e},e}function ge(){var e=Object(o.a)(["\n    margin: 16px 0 0 16px;\n    padding: 16px;\n    background-color: #5a328e;\n    border-radius: 4px;\n    user-select: none;\n    cursor: pointer;\n\n    h4 {\n      margin: 0;\n      font-weight: normal;\n      color: #e9d8ff;\n    }\n\n    > p {\n      margin: 0.5em 0 0 0;\n      font-size: 0.8em;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: #c99fff;\n    }\n\n    div {\n      display: flex;\n      justify-content: space-between;\n      font-size: 0.8em;\n      color: #c99fff;\n\n      p {\n        margin: 1.5em 0 0 0;\n      }\n    }\n  "]);return ge=function(){return e},e}function ve(){var e=Object(o.a)(["\n    width: 300px;\n  "]);return ve=function(){return e},e}function xe(){var e=Object(o.a)(["\n    display: flex;\n    background-color: ",";\n  "]);return xe=function(){return e},e}var Ee={Page:c.a.div(xe(),j),List:c.a.div(ve()),Card:c.a.div(ge()),Content:c.a.div(be(),S)},we=function(){var e=Object(a.useState)([]),n=Object(y.a)(e,2),t=n[0],i=n[1],l=Object(a.useState)(null),o=Object(y.a)(l,2),c=o[0],u=o[1],s=Object(a.useState)(!1),p=Object(y.a)(s,2),d=p[0],m=p[1],f=Object(a.useState)(""),h=Object(y.a)(f,2),b=h[0],g=h[1],v=function(){var e=Object(E.a)(x.a.mark((function e(){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({query:"\n        {\n          listOwnURLs {\n            hash,\n            url,\n            title,\n            createdAt\n          }\n        }\n      "});case 2:(n=e.sent)&&n.listOwnURLs&&(i(n.listOwnURLs),u(null));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){Object(E.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:case"end":return e.stop()}}),e)})))()}),[]);var w;return r.a.createElement(Ee.Page,null,r.a.createElement(Ee.List,null,t.map((function(e){return r.a.createElement(Ee.Card,{onClick:(n=e.hash,function(){u(t.find((function(e){return e.hash===n})))})},r.a.createElement("h4",null,e.title),r.a.createElement("p",null,e.url),r.a.createElement("div",null,r.a.createElement("p",null,"1 Click"),r.a.createElement("p",null,Object(me.a)(new Date(parseInt(e.createdAt)),"dd.MM.yyyy"))));var n}))),r.a.createElement(Ee.Content,null,c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,c.title),r.a.createElement("p",null,r.a.createElement("a",{href:c.url},r.a.createElement(he.a,null)," ",c.url)),r.a.createElement("p",null,r.a.createElement("a",{href:"".concat("https://env-7018596.jelastic.metropolia.fi/").concat(c.hash)},r.a.createElement(he.a,null)," ","".concat("https://env-7018596.jelastic.metropolia.fi/").concat(c.hash))),d&&r.a.createElement("input",{type:"text",value:b,onChange:function(e){return g(e.target.value)}}),r.a.createElement("button",{onClick:(w=c.hash,Object(E.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(!d),!d||!b){e.next=8;break}return e.next=4,C({query:"\n          mutation Update($hash: String!, $url: String!) {\n            updateUrl(hash: $hash, url: $url) {\n              success\n            }\n          }\n        ",variables:{hash:w,url:b}});case 4:if(!e.sent.updateUrl.success){e.next=8;break}return e.next=8,v();case 8:g("");case 9:case"end":return e.stop()}}),e)}))))},"Update"),r.a.createElement("button",{onClick:function(e){return Object(E.a)(x.a.mark((function n(){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("This cannot be reversed. Are you sure?")){n.next=7;break}return n.next=3,C({query:"\n          mutation Remove($hash: String!) {\n            removeUrl(hash: $hash) {\n              success\n            }\n          }\n        ",variables:{hash:e}});case 3:if(!n.sent.removeUrl.success){n.next=7;break}return n.next=7,v();case 7:case"end":return n.stop()}}),n)})))}(c.hash)},"Delete"))))},ke=t(65),ye=t(12);var je=function(){return r.a.createElement(ke.a,null,r.a.createElement(g,null),r.a.createElement(ye.c,null,r.a.createElement(ye.a,{path:"/login"},r.a.createElement(oe,null)),r.a.createElement(ye.a,{path:"/register"},r.a.createElement(de,null)),r.a.createElement(ye.a,{path:"/manage"},r.a.createElement(we,null)),r.a.createElement(ye.a,{path:"/"},r.a.createElement(ne,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,n,t){e.exports=t(111)},73:function(e,n,t){}},[[68,1,2]]]);
//# sourceMappingURL=main.9ff9a5cf.chunk.js.map